---
layout: post
title: "농경사회로의 전환 시뮬레이션"
tags: [신석기, 청동기, 시뮬레이션, Python]
comments: true
---

### 1. 목적

​	최근 고고학에서 통계학을 활용하는 법에 대해 배우고 있다. 오늘 처음 배운 부분이 T-test였는데 계산기로 직접 검정하니 자꾸 실수도 생기고, 귀찮기도 해서 통계학에서 많이 사용하는 언어인 R을 활용하여 주어진 예제를 풀어보고자 한다. 

​	T-test는 두 표본간 평균의 비교를 통해 실제로 두 표본이 다른 것인지 혹은 단순히 표본상의 차이일 뿐인지 확인하는 검정방법이다. 실제로 차이가 있다는 것을 확인하고 싶다면 먼저 양자가 동일하다는 귀무가설을 세운다. 이후 이 가설을 기각할 수 있는지 테스트를 하여 기각이 가능하다면 대립가설이 참이므로 실제로 차이가 있다는 것을 확인할 수 있는 것이다.

​	T-test를 사용하기 위해서는 먼저 표본이 연속형변수여야하며 비교대상이 되는 양자 모두 정규분포를 이루고 있어야한다. 고전적인 방법에서는 두 표본의 분산에도 차이가 없어야하지만, 최근 경향을 보면 이 조건은 반드시 지킬 필요가 없다고 한다.

​	공식에 따라 동일 모집단에서 추출한 표본의 평균차이의 분포인 t값을 계산해냈다면 아래의 Table을 참고하여 유의수준에 따라 비교해보면 된다. 해당 유의수준의 값보다 크다면 귀무가설을 기각할 수 있고 그렇지 않다면 기각할 수 없다.

<img src="https://github.com/ChanToRe/ChanToRe.github.io/blob/master/images/t-distribution_table.jpg?raw=true" width="60%" height="60%"/>

### 2. 코드

```R
#Walker 1995
#유의수준 0.05에서 결론
#Floor 3
X3 = 14.83 #평균길이
S3 = 2.6551 #표준편차
N3 = 63 #유물의 수

#Floor 4
X4 = 14.17 #평균길이
S4 = 2.3431 #표준편차
N4 = 47 #유물의 수

df1 = N3+N4-2 #자유도

SE = sqrt((((N3-1)*S3^2+(N4-1)*S4^2)/(N3+N4-2)))*sqrt((N3+N4)/(N3*N4))
print(SE) #두 평균의 표본오차

t = (X3 - X4)/SE #t분포
print(t)

#유의수준이 0.05이므로 t값이 1.671보다 클때 귀무가설을 기각시킬 수 있으나 t = 1.3551
#-> 귀무가설 기각 불가능
#0.1 < P < 0.05
```

​	전체 코드이다. R을 사용했다. 사실 코드라고 하기도 민망하다. 

<br>

```R
#Floor 3
X3 = 14.83 #평균길이
S3 = 2.6551 #표준편차
N3 = 63 #유물의 수

#Floor 4
X4 = 14.17 #평균길이
S4 = 2.3431 #표준편차
N4 = 47 #유물의 수
```

​	코드 내에서 주거지 역할을 맡을 Residence 클래스를 만들었다. Residence 클래스는 기본적으로 hunting 상태로 시작하며, stress 지수를 가지고 있다. 이 stress 지수가 100이되면 상태는 farming으로 변하도록할 것이다.

<br>

```R
df1 = N3+N4-2 #자유도

SE = sqrt((((N3-1)*S3^2+(N4-1)*S4^2)/(N3+N4-2)))*sqrt((N3+N4)/(N3*N4))
print(SE) #두 평균의 표본오차
```

​	Residence 클래스 안에 display 함수를 두었다. 만약 상태가 hunting일 경우 초록색 삼각형으로 표시할 것이다. 상태가 farming일 경우에는 빨간색 삼각형으로 표시할 것이다. 각각의 주거지는 지름 30의 원을 영역범위로 갖는다.

<br>

```R
t = (X3 - X4)/SE #t분포
print(t)
```

​	Residence 클래스 내에 change 함수를 두었다. change 함수는 수렵채집사회 주거지가 농경사회 주거지로 변화하는 기능을 갖는다. 먼저 distence를 두어 각 주거지의 거리를 재도록 하였다. 주거지의 상태가 hunting일 때 farming 상태인 주거지와 distence가 30보다 작거나 같을 경우(각 영역범위가 겹칠 경우) stress가 1누적되게 했다. 주거지의 상태가 farming일 때는 별다른 변화가 없게 하였다. 

<br>

```R
#철기가 발견된 주거지가 더 큰가에 관한 문제
#철기가 발견된 주거지
X1 = 38.3
S1 = 3.1
N1 = 34

#철기가 발견되지 않은 주거지
X2 = 36.9
S2 = 3.7
N2 = 53

df2 = N1+N2-2 #자유도
SE2 = sqrt((((N1-1)*S1^2+(N2-1)*S2^2)/(N1+N2-2)))*sqrt((N1+N2)/(N1*N2))
print(SE2) #두 평균의 표본오차

t2 = (X1 - X2)/SE2 #t분포
print(t2)

#t값이 1.831241이므로 귀무가설을 기각시킬 수 있다. -> 철기가 발견된 주거지가 더 크다
#0.05 < P < 0.025
```

​	앞서 선언한 Residence 클래스를 활용해서 시뮬레이션을 실행할 것이다. RESIDENCE는 주거지의 개수이다. 이 중 2개의 주거지를 farming상태로 두어 농경사회의 이주상활을 가정했다. 대지를 500x500 사이즈로 임의 설정 해두었으나 남한지역의 면적으로 바꾸는 작업이 추후 필요할 것 같다. 

<br>



### 3. 향후 계획

​	전환되는 것을 확인하였으니 시간코드를 연결하여 얼마나 걸리는지 측정할 것이다. 이후 수 천번의 시뮬레이션 결과를 통해 평균시간을 추출해볼 것이다.

​	주거지의 영역 범위와 주거지의 수를 고고학적 자료를 통해 유추해야한다. 주거지의 수는 신석기 후기 생활유적과 청동기 전기 생활유적 사이에서 어느정도 추측할 수 있을 것 같으나, 주거지의 영역 범위를 어떻게 추론해낼지는 아직 잘 모르겠다. 또한 몇 퍼센트의 주거지가 농경사회 주거지로 변했을 때 농경사회화가 되었다라고 할지 정해야할 것 같다.

​	개인적인 추측으로는 남한지역이라는 좁은 범위 내에 인구밀도가 어느정도 높았던 것 같다. 해당 시뮬레이션을 수차례 돌려보면서 주거지의 수가 많지 않을 경우 전파가 끊기게 되는 것을 확인할 수 있었다. 주거지의 수가 많지 않았다면 수렵채집민들의 영역범위가 엄청 넓었을 것이고 영역범위가 그렇게 넓지 않았다면 주거지의 밀집도가 높았던 것으로 추측한다. 교수님 말씀에 의하면 우리나라뿐만 아니라 중부유럽도 비슷한 양상을 보인다고 하는데 함께 비교해보면 좋을 것 같다.